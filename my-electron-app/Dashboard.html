<!DOCTYPE html>
<meta name="viewport" content="width=device-width, initial-scale=1">
<html class="back">
    <link id="pagestyle" href="./dashboard.css" rel="stylesheet" type="text/css" />

    <head>
        <div class="sidebar">
            <div id="heyobg" class="heyobg">
                <h2 id="heyo">HEYO</h2>
            </div>
            <div class="choices">
                <label id="dash">DASHBOARD</label>
                <label id="cal">CALENDAR</label>
                <label id="Entry">ENTRY</label>
                <label id="todo">TO DO</label>
                <button id="theme">Change theme</button>
            </div>
        </div>
    </head>
    <body>
        <div id="img">
            <canvas id="mychart" width="850px" height="315px"></canvas>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

        <script>
                var pg = require('pg');
                let usernameg = localStorage.getItem("userg");
    let conp = localStorage.getItem("passg");
            let today = new Date().toISOString();
          var moodchart = [];
          var gconn = new pg.Client("postgres://"+usernameg+":"+conp+"@74.68.42.21:5432/heyo_scale");
          gconn.connect(function (err){
            var i = 1;
          while(i<8){
            console.log(i);
            var rang= new Date();
            var isodate = rang.setDate(rang.getDate() - i);
            isodate = new Date(isodate).toISOString();
            sql = "SELECT moodrating FROM public."+usernameg+" WHERE date between '"+isodate+"' and '"+today+"'";
            
                gconn.query(sql, function (err, result) {});
                console.log("Data "+i+" taken");
                  moodchart[i] = sql;
                  console.log(sql);
                  i++;
              }
            
            console.log(moodchart[i]+"pp");
          }
          );
        var ctx = document.getElementById('mychart');
          var mychart = new Chart(ctx, {
          // The type of chart we want to create
          type: 'line',

          // The data for our dataset
          data: {
          labels: ['January', 'February'],
          datasets: [{
              label: 'ur mom',
              backgroundColor: 'rgb(255, 99, 132)',
              borderColor: 'rgb(255, 99, 132)',
              data: moodchart
  }]
},
// Configuration options go here

});
          </script>
        <button id="moods">Record mood</button>
        <div id="wtodo">To Do</div>
    </body>
    
    <script src="dashboard.js"></script>
</html>
